<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted } from 'vue'

const currentRole = ref<'worker' | 'employer'>('worker')
const showSwitcher = ref(false)

if (process.client) {
  const onScroll = () => (showSwitcher.value = window.scrollY > 100)
  onMounted(() => window.addEventListener('scroll', onScroll))
  onUnmounted(() => window.removeEventListener('scroll', onScroll))
}

const advantages = computed(() =>
  currentRole.value === 'worker'
    ? [
        { icon: 'üöÄ', title: '–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç', description: '–ù–∞–π–¥–∏—Ç–µ –∑–∞–∫–∞–∑—ã —Ä—è–¥–æ–º —Å –≤–∞–º–∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ' },
        { icon: 'üõ°Ô∏è', title: '–ì–∞—Ä–∞–Ω—Ç–∏—è –æ–ø–ª–∞—Ç—ã', description: '–°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è' },
        { icon: 'üí∏', title: '–ù—É–ª–µ–≤–∞—è –∫–æ–º–∏—Å—Å–∏—è', description: '0% –∫–æ–º–∏—Å—Å–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π' }
      ]
    : [
        { icon: '‚ö°', title: '–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫', description: '–û—Ç–∫–ª–∏–∫–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∑–∞ –º–∏–Ω—É—Ç—ã' },
        { icon: 'üîÑ', title: '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø–æ—Ç–æ–∫', description: '–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤' },
        { icon: 'üìä', title: '–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞', description: '–û—Ç—á—ë—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á' }
      ]
)
</script>

<template>
  <div class="bg-white font-sans">
    <Transition name="fade">
      <div
        v-if="showSwitcher"
        class="fixed top-4 right-4 z-50 flex gap-4 items-center bg-white rounded-xl shadow-lg p-3"
      >
        <div
          class="flex flex-col items-center cursor-pointer px-2 py-1 rounded hover:bg-gray-100 transition"
          :class="{ 'bg-primary text-white': currentRole === 'worker' }"
          @click="currentRole = 'worker'"
        >
          <span class="text-xl">üë∑</span>
          <span class="text-xs font-semibold mt-1">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</span>
        </div>
        <div
          class="flex flex-col items-center cursor-pointer px-2 py-1 rounded hover:bg-gray-100 transition"
          :class="{ 'bg-primary text-white': currentRole === 'employer' }"
          @click="currentRole = 'employer'"
        >
          <span class="text-xl">üì¢</span>
          <span class="text-xs font-semibold mt-1">–ó–∞–∫–∞–∑—á–∏–∫</span>
        </div>
      </div>
    </Transition>

    <section class="text-center bg-gradient-to-br from-indigo-700 to-indigo-900 text-white py-28 px-4">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
        {{
          currentRole === 'worker'
            ? '–ò—â–∏—Ç–µ –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –±–µ–∑ —Ä–∏—Å–∫–æ–≤ –∏ –∑–∞–¥–µ—Ä–∂–µ–∫'
            : '–ù–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –º–≥–Ω–æ–≤–µ–Ω–Ω–æ'
        }}
      </h1>
      <p class="mb-6 text-base md:text-xl max-w-2xl mx-auto text-indigo-200">
        {{
          currentRole === 'worker'
            ? '–†–∞–±–æ—Ç–∞–π—Ç–µ –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π, —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –æ–ø–ª–∞—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 24/7'
            : '–ü—É–±–ª–∏–∫—É–π—Ç–µ –∑–∞–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–∫–ª–∏–∫–∏ –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Ç—ã'
        }}
      </p>
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
        <NuxtLink to="/reg">
          <button class="bg-white text-primary px-6 py-3 rounded-full font-semibold hover:scale-105 transition-transform">
            {{ currentRole === 'worker' ? '–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ' : '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É' }}
          </button>
        </NuxtLink>
        <NuxtLink to="/sign">
          <button class="border-2 border-white text-white px-6 py-3 rounded-full font-semibold hover:bg-white hover:text-primary transition-colors duration-200">
            –í–æ–π—Ç–∏
          </button>
        </NuxtLink>
      </div>
    </section>

    <section class="py-20 bg-gray-50 px-4">
      <h2 class="text-3xl md:text-4xl text-center text-primary font-bold mb-8">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h2>
      <div class="max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <div
          v-for="(item, i) in advantages"
          :key="i"
          class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition-transform hover:-translate-y-1"
        >
          <div class="text-5xl mb-4 text-center">{{ item.icon }}</div>
          <h3 class="text-xl font-semibold mb-2 text-center">{{ item.title }}</h3>
          <p class="text-gray-600 text-center">{{ item.description }}</p>
        </div>
      </div>
    </section>

    <section class="py-20 px-4">
      <h2 class="text-3xl md:text-4xl text-center text-primary font-bold mb-10">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
      <div class="max-w-4xl mx-auto space-y-10 sm:space-y-0 sm:flex sm:justify-between">
        <div class="flex flex-col items-center text-center">
          <div class="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-2xl mb-3 shadow-lg">1</div>
          <h4 class="font-medium mb-1">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h4>
          <p class="text-gray-600 text-sm">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∑–∞ –º–∏–Ω—É—Ç—É</p>
        </div>
        <div class="flex flex-col items-center text-center">
          <div class="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-2xl mb-3 shadow-lg">2</div>
          <h4 class="font-medium mb-1">–ü–æ–∏—Å–∫</h4>
          <p class="text-gray-600 text-sm">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</p>
        </div>
        <div class="flex flex-col items-center text-center">
          <div class="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-2xl mb-3 shadow-lg">3</div>
          <h4 class="font-medium mb-1">–û–ø–ª–∞—Ç–∞</h4>
          <p class="text-gray-600 text-sm">–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</p>
        </div>
      </div>
    </section>

    <section class="py-16 bg-gradient-to-br from-indigo-800 to-indigo-900 text-white text-center px-4">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?</h2>
      <p class="mb-6">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—ã—Å—è—á–∞–º {{ currentRole === 'worker' ? '–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π' : '–∑–∞–∫–∞–∑—á–∏–∫–æ–≤' }} —Å–µ–≥–æ–¥–Ω—è</p>
      <NuxtLink to="/reg">
        <button class="bg-white text-primary px-8 py-3 rounded-full font-semibold hover:scale-105 transition-transform">
          {{ currentRole === 'worker' ? '–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ' : '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É' }}
        </button>
      </NuxtLink>
    </section>
  </div>
</template>

<style scoped>
.fade-enter-active, .fade-leave-active { transition: opacity 0.3s; }
.fade-enter-from, .fade-leave-to { opacity: 0; }
</style>
